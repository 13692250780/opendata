webpackJsonp([30],{ACRx:function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t={components:{UPLOADIMAGE:r("AxVU").default},data:function(){return{visible:!1,uploadVisible:!1,dataForm:{id:0,bannerName:"",bannerUrl:"",linkUrl:"",priority:"",isShow:1,createTime:""},dataRule:{bannerName:[{required:!0,message:"轮播图名称不能为空",trigger:"blur"}],bannerUrl:[{required:!0,message:"图片地址不能为空",trigger:"blur"}],linkUrl:[{required:!0,message:"跳转地址不能为空",trigger:"blur"}],priority:[{required:!0,message:"优先级别不能为空",trigger:"blur"}],isShow:[{required:!0,message:"是否展示不能为空",trigger:"blur"}],createTime:[{required:!0,message:"创建时间不能为空",trigger:"blur"}]}}},methods:{init:function(e){var a=this;this.dataForm.id=e||0,this.visible=!0,this.$nextTick(function(){a.$refs.dataForm.resetFields(),a.dataForm.id&&a.$http({url:a.$http.adornUrl("/generator/hdhbanner/info/"+a.dataForm.id),method:"get",params:a.$http.adornParams()}).then(function(e){var r=e.data;r&&0===r.code&&(a.dataForm.bannerName=r.hdhBanner.bannerName,a.dataForm.bannerUrl=r.hdhBanner.bannerUrl,a.dataForm.linkUrl=r.hdhBanner.linkUrl,a.dataForm.priority=r.hdhBanner.priority,a.dataForm.isShow=r.hdhBanner.isShow,a.dataForm.createTime=r.hdhBanner.createTime)})})},dataFormSubmit:function(){var e=this;this.$refs.dataForm.validate(function(a){a&&e.$http({url:e.$http.adornUrl("/generator/hdhbanner/"+(e.dataForm.id?"update":"save")),method:"post",data:e.$http.adornData({id:e.dataForm.id||void 0,bannerName:e.dataForm.bannerName,bannerUrl:e.dataForm.bannerUrl,linkUrl:e.dataForm.linkUrl,priority:e.dataForm.priority,isShow:e.dataForm.isShow,createTime:e.dataForm.createTime})}).then(function(a){var r=a.data;r&&0===r.code?e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){e.visible=!1,e.$emit("refreshDataList")}}):e.$message.error(r.msg)})})},getBannerUrl:function(e){this.dataForm.bannerUrl=e,console.log(e)},showUpload:function(){var e=this;this.uploadVisible=!0,this.$nextTick(function(){e.$refs.upload.init()})}}},n={render:function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("el-dialog",{attrs:{title:e.dataForm.id?"修改":"新增","close-on-click-modal":!1,visible:e.visible},on:{"update:visible":function(a){e.visible=a}}},[r("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"100px"},nativeOn:{keyup:function(a){if(!("button"in a)&&e._k(a.keyCode,"enter",13,a.key,"Enter"))return null;e.dataFormSubmit()}}},[r("el-form-item",{attrs:{label:"轮播图名称",prop:"bannerName"}},[r("el-input",{attrs:{placeholder:"轮播图名称"},model:{value:e.dataForm.bannerName,callback:function(a){e.$set(e.dataForm,"bannerName",a)},expression:"dataForm.bannerName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"图片上传",prop:"bannerUrl"}},[r("el-input",{attrs:{disabled:""},model:{value:e.dataForm.bannerUrl,callback:function(a){e.$set(e.dataForm,"bannerUrl",a)},expression:"dataForm.bannerUrl"}}),e._v(" "),r("div",{staticStyle:{color:"#00a0e9"},on:{click:e.showUpload}},[e._v("点击上传图片")])],1),e._v(" "),r("el-form-item",{attrs:{label:"跳转地址"}},[r("el-input",{attrs:{placeholder:"跳转地址"},model:{value:e.dataForm.linkUrl,callback:function(a){e.$set(e.dataForm,"linkUrl",a)},expression:"dataForm.linkUrl"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"优先级别"}},[r("el-input",{attrs:{placeholder:"优先级别"},model:{value:e.dataForm.priority,callback:function(a){e.$set(e.dataForm,"priority",a)},expression:"dataForm.priority"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"是否展示",prop:"isShow"}},[r("el-select",{attrs:{placeholder:"是否展示"},model:{value:e.dataForm.isShow,callback:function(a){e.$set(e.dataForm,"isShow",a)},expression:"dataForm.isShow"}},[r("el-option",{attrs:{label:"是",value:1}}),e._v(" "),r("el-option",{attrs:{label:"否",value:0}})],1)],1)],1),e._v(" "),e.uploadVisible?r("UPLOADIMAGE",{ref:"upload",on:{reUrl:e.getBannerUrl}}):e._e(),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(a){e.visible=!1}}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(a){e.dataFormSubmit()}}},[e._v("确定")])],1)],1)},staticRenderFns:[]},o=r("VU/8")(t,n,!1,null,null,null);a.default=o.exports}});